<script type="text/x-red" data-template-name="ir code">
  <!-- data-template-name identifies the node type this is for              -->
  <div class="form-row">
    <label for="node-input-device"><i class="icon-tag"></i> Device</label>
    <input type="text" id="node-input-device" placeholder="/dev/input/event0">
   </div>
   <div class="form-row">
       <label for="node-input-name"><i class="icon-tag"></i> Name</label>
       <input type="text" id="node-input-name" placeholder="Name">
   </div>
</script>

<!-- help text for the node.                   -->
<script type="text/x-red" data-help-name="ir code">
  <!-- data-help-name identifies the node type this help is for             -->
  <!-- This content appears in the Info sidebar when a node is selected     -->
  <!-- The first <p> is used as the pop-up tool tip when hovering over a    -->
  <!-- node in the palette.                                                 -->
  <p>Raspberry Pi Zero infra red remote control input node. No need for lircd.</p>
  <p>This node requires /boot/config.txt to include <i>dtoverlay=gpio-ir,gpio_pin=17,gpio_pull=1</i></p>
  <p>It will intercept <i>ir-keytable</i> EV_KEY events and output a <b>msg.payload</b> with the relevant key code.</p>
</script>

<!-- node type is registered along with all of its properties   -->
<script type="text/javascript">
  RED.nodes.registerType("ir code", {
    category: "Solar Sense",                                       // the palette category
    defaults: {
      // defines the editable properties of the node
      device: { value: "/dev/input/event0", required: true },   // input device name.
      name:   { value: "" }                                     // node name
    },
    inputs: 0,                                                  // set the number of inputs - only 0 or 1
    outputs: 1,                                                 // set the number of outputs - 0 to n

    // set the icon (held in icons dir below where you save the node)
    icon: "ir.png",                                             // saved in  icons/ir.png
    color: "#A6BBCF",
    label: function() {
      // sets the default label contents
      return this.name || this.topic || "ir code";
    },
    labelStyle: function() {
      // sets the class to apply to the label
      return this.name ? "node_label_italic" : "";
    }
  });
</script>
